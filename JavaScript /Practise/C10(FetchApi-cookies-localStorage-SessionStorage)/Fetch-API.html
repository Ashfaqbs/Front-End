<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <h1>Network Request by Fetch API </h1>
    <pre>
    <h3>
      1. Javascript can be used to send and receive information from the network when needed (AJAX Asynchronous
          Javascript and XML)
      2. AJAX is an umbrella term to connect with network , it got its name as previous time we used to perform XML
           request .
       
      3. Fetch api is used to receive or send data from the network to the servers <br>
          Fetch api syntax
           let promise = fetch(url,[options])
          <u>Note: without options a GET request is sent, so now only we can receive data from a serve over the network</u>   <br>
        <b>
       4.  We can perform get,post,put methods by fetch api, i.e we can get data or post data to the server.
            We can work with promises.
            //Fetch api syntax
            // let promise = fetch(url,[options])
<ul>
    <li>
        <h1>Getting a response from a promise a 2 stage Process</h1>
      i.e we have to use 2 times .then one for fetch and one for the response from fetch to get the data
        
      1. An Object of response class containing status and ok properties 
       status - This will be a HTTP status code eg 200.
       OK - boolean , true if the http status code is 200-299.

      2. After that we need to call another method to access the body in different formats i.e text and json
       from the fetch we get a response 



    </li>
    <li>
        <h1>Response Headers</h1>
        The response headers are available in response.headers
        <h1>Request Headers</h1>
        To set a  Request headers in fetch we can use headers option.
        syntax:


        let res =fetch(url,{headers:{
            auth:secretCode
        }})

    </li>
</ul>


//Free api https://jsonplaceholder.typicode.com/todos/1

//Fetch api syntax
// let promise = fetch(url,[options])

//handling fetch as a Promise

// let callApi = fetch('https://jsonplaceholder.typicode.com/todos/2')

// //handling successful and error scenarios
// callApi.then((response) => {
//     console.log(response)
//     //this response gives a promise

//     //this first gives a response object , we will return this
//     // i.e
//     // Response {type: 'cors', url: 'https://jsonplaceholder.typicode.com/todos/2', redirected: false, status: 200, ok: true, …}

//     console.log(response.status)//true
//     console.log(response.ok)//true
//     console.log(response.headers)//Headers {} will be given
//     //will convert to JSON and send it , we can also send it into text

//     // :Note we can only send it by JSON or text or others i.e dont call all methods for response use only one
//     return response.json()
// }, (err) => { console.log(err) }).then((responseJSON) => {
//     console.log(responseJSON);
//     console.log(responseJSON.userId + " is the UserID")
// }, (err) => { console.log(err) })



//as a promise

// let p1 = 

// p1.then(response1 => {
//     console.log(response1.status)
//     console.log(response1.ok)
//     console.log(response1.headers)
//     return response1.json();
// },
//     (error) => { console.log(error) }).then((response) => {

//         console.log(response)
//     })


//inside a function with promise
//  let p1 = (id)=>{

//   return  fetch(`https://jsonplaceholder.typicode.com/todos/${id}`)

//  }
//  p1(5).then(response1 => {
//             console.log(response1.status)
//             console.log(response1.ok)
//             console.log(response1.headers)
//             return response1.json();
//         },
//             (error) => { console.log(error) }).then((response) => {

//                 console.log(response)
//             })



//as a Async and await we will use now


async function callURL() {
    try {
        let response = await fetch(`https://jsonplaceholder.typicode.com/todos/9`);
        //can await a functoin which has fetch inside it 
        console.log(response.headers)
        console.log(response.ok)
        console.log(response.status)
        let data = await response.json()
        console.log(data)
    } catch (error) {
        console.log(error)
    }

}

</pre>




    </b>

    </h3>






    <script>
        //Free api https://jsonplaceholder.typicode.com/todos/1

        //Fetch api syntax
        // let promise = fetch(url,[options])

        //handling fetch as a Promise

        // let callApi = fetch('https://jsonplaceholder.typicode.com/todos/2')

        // //handling successful and error scenarios
        // callApi.then((response) => {
        //     console.log(response)
        //     //this response gives a promise

        //     //this first gives a response object , we will return this
        //     // i.e
        //     // Response {type: 'cors', url: 'https://jsonplaceholder.typicode.com/todos/2', redirected: false, status: 200, ok: true, …}

        //     console.log(response.status)//true
        //     console.log(response.ok)//true
        //     console.log(response.headers)//Headers {} will be given
        //     //will convert to JSON and send it , we can also send it into text

        //     // :Note we can only send it by JSON or text or others i.e dont call all methods for response use only one
        //     return response.json()
        // }, (err) => { console.log(err) }).then((responseJSON) => {
        //     console.log(responseJSON);
        //     console.log(responseJSON.userId + " is the UserID")
        // }, (err) => { console.log(err) })



        //as a promise

        // let p1 = 

        // p1.then(response1 => {
        //     console.log(response1.status)
        //     console.log(response1.ok)
        //     console.log(response1.headers)
        //     return response1.json();
        // },
        //     (error) => { console.log(error) }).then((response) => {

        //         console.log(response)
        //     })


        //inside a function with promise
        //  let p1 = (id)=>{

        //   return  fetch(`https://jsonplaceholder.typicode.com/todos/${id}`)

        //  }
        //  p1(5).then(response1 => {
        //             console.log(response1.status)
        //             console.log(response1.ok)
        //             console.log(response1.headers)
        //             return response1.json();
        //         },
        //             (error) => { console.log(error) }).then((response) => {

        //                 console.log(response)
        //             })



        //as a Async and await we will use now


        async function callURL() {
            try {
                let response = await fetch(`https://jsonplaceholder.typicode.com/todos/9`);
                //can await a functoin which has fetch inside it 
                console.log(response.headers)
                console.log(response.ok)
                console.log(response.status)
                let data = await response.json()
                console.log(data)
            } catch (error) {
                console.log(error)
            }

        }


        callURL()
    </script>
</body>

</html>