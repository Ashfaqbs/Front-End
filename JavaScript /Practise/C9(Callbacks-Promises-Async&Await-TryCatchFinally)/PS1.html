<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>PS1</h1>

    <script>


        //1 load a file 

        // let loadFile = (url) => {


        //     let p1 = new Promise((resolve, reject) => {

        //         //create
        //         let link = document.createElement('script')

        //         //add data to the attribute
        //         link.src = url;
        //         console.log(url)
        //         //  'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css'
        //         //add inside the head


        //         document.body.appendChild(link)

        //         link.onload = () => {
        //             resolve('link loaded successfully')
        //         }
        //         link.onerror = () => {
        //             reject('link is not loaded')
        //         }
        //     })

        //     return p1;
        // }



        //1
        // loadFile('https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js').then((resolve) => {
        //     console.log(resolve)
        //     alert('link is loaded successfully')
        // }, (error) => {
        //     console.log(error)
        //     alert('link is not loaded successfully')
        // })


        //2
        // async function doTask() {

        //     try {

        //         let result = await loadFile('https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js')
        //         console.log(result)
        //         alert('link is loaded successfully')

        //     } catch (error) {

        //         alert('link is not loaded successfully')
        //         console.log(error)
        //     }

        // }

        // doTask()


        //3 
        let rejectPromise = () => {

            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log('rejecting after 3s')
                    reject('Rejecting the promise after 3s')
                }, 3000)
            })
        }

        //handling promise normally
        // rejectPromise().then((data) => {
        //     console.log(data)
        // }, (err) => { console.log(err + ' is the error') })


        //by async /await
        // async function doTask() {

        //     try {
        //         let response = await rejectPromise()
        //         console.log(response)
        //     } catch (error) {

        //         console.log(error + " is handled")
        //     }


        // }
        // doTask()



        //4 

        let p1 = new Promise((r, j) => {

            setTimeout(() => {
                r('response success 1')
                // console.log('promise 1')
            }, 1000)

        })

        let p2 = new Promise((r, j) => {

            setTimeout(() => {
                r('response success 2 ')

                // console.log('promise 2')
            }, 2000)

        })

        let p3 = new Promise((r, j) => {

            setTimeout(() => {
                r('response success 3')

                // console.log('promise 3')
            }, 3000)

        })


        // p1.then((response) => { console.log(response) }, (err) => { console.log(err) })
        // p2.then((response) => { console.log(response) }, (err) => { console.log(err) })
        // p3.then((response) => { console.log(response) }, (err) => { console.log(err) })



        // let all_p = Promise.all([p1, p2, p3])
        // all_p.then((d) => { console.log(d) }, (e) => { console.log(e) })




        async function doTask() {
            try {

                // console.time('2')//3006.3779296875 ms
                // let pp1 = await p1
                // let pp2 = await p2
                // let pp3 = await p3
                // console.log(pp1 + pp2 + pp3)

                // console.timeEnd('2')

                console.time('1')//3002.36181640625 ms faster then above
                let response = await Promise.all([p1, p2, p3])
                console.log(response)
                console.timeEnd('1')


            } catch (error) {
                console.log(error)
            }
        }
        doTask()

    </script>


</body>

</html>